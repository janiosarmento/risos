# =============================================================================
# RSS Reader - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in the required values.
# Lines starting with # are comments.
# =============================================================================

# -----------------------------------------------------------------------------
# Required Settings (no defaults - must be set)
# -----------------------------------------------------------------------------

# Application password for login (choose a strong password)
APP_PASSWORD=your_secure_password_here

# JWT secret key for token signing (minimum 32 characters)
# Generate with: openssl rand -hex 32
JWT_SECRET=your_secret_key_minimum_32_characters_long

# -----------------------------------------------------------------------------
# Database
# -----------------------------------------------------------------------------

# Path to SQLite database file
DATABASE_PATH=./data/reader.db

# -----------------------------------------------------------------------------
# Cerebras AI (for article summaries)
# -----------------------------------------------------------------------------

# API key from https://cloud.cerebras.ai/
CEREBRAS_API_KEY=your_cerebras_api_key

# Model to use for summaries
# Options: llama3.1-8b, llama-3.3-70b, qwen-3-32b
CEREBRAS_MODEL=llama-3.3-70b

# Maximum requests per minute (respect API limits)
CEREBRAS_MAX_RPM=20

# API timeout in seconds
CEREBRAS_TIMEOUT=30

# Language for generated summaries
# Examples: Brazilian Portuguese, English, Spanish, French, German
SUMMARY_LANGUAGE=Brazilian Portuguese

# -----------------------------------------------------------------------------
# Feed Updates
# -----------------------------------------------------------------------------

# How often to check feeds for new posts (in minutes)
FEED_UPDATE_INTERVAL_MINUTES=30

# Maximum posts to keep per feed
MAX_POSTS_PER_FEED=500

# -----------------------------------------------------------------------------
# Data Retention / Cleanup
# -----------------------------------------------------------------------------

# Delete read posts older than X days
MAX_POST_AGE_DAYS=365

# Delete unread posts older than X days
MAX_UNREAD_DAYS=90

# Hour of day to run cleanup job (0-23, server timezone)
CLEANUP_HOUR=3

# Maximum database size in MB (warning threshold)
MAX_DB_SIZE_MB=1024

# -----------------------------------------------------------------------------
# Circuit Breaker (AI API protection)
# -----------------------------------------------------------------------------

# Number of failures before opening circuit
FAILURE_THRESHOLD=5

# Seconds to wait before trying again after circuit opens
RECOVERY_TIMEOUT_SECONDS=300

# Successful requests needed to close circuit
HALF_OPEN_MAX_REQUESTS=3

# -----------------------------------------------------------------------------
# Rate Limiting (HTTP endpoints)
# -----------------------------------------------------------------------------

# Login attempts per minute per IP
LOGIN_RATE_LIMIT=5

# API requests per minute per user
API_RATE_LIMIT=100

# Feed refresh requests per minute
FEEDS_REFRESH_RATE_LIMIT=10

# -----------------------------------------------------------------------------
# Proxy (for fetching full article content)
# -----------------------------------------------------------------------------

# Timeout for fetching external URLs
PROXY_TIMEOUT_SECONDS=10

# Maximum size for fetched content (bytes)
PROXY_MAX_SIZE_BYTES=5242880

# -----------------------------------------------------------------------------
# Authentication
# -----------------------------------------------------------------------------

# JWT token expiration in hours
JWT_EXPIRATION_HOURS=24

# Summary processing lock timeout (seconds)
SUMMARY_LOCK_TIMEOUT_SECONDS=300

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Path to log file
LOG_FILE=./data/app.log

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------

# Allowed CORS origins (comma-separated for multiple)
CORS_ORIGINS=http://localhost
